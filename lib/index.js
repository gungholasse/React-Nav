"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ContentGroup=void 0;var _react=_interopRequireWildcard(require("react")),_styledComponents=_interopRequireWildcard(require("styled-components")),_memoizeOne=_interopRequireDefault(require("memoize-one")),_lodash=_interopRequireDefault(require("lodash.kebabcase"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var defaultRootAlign="center",defaultColor="#fff",defaultColumnWidth=150,defaultRowHeight=45,defaultBackground="#323232",defaultBreakpoint=768,defaultContentBackground="#fff",arrowHeight=5,perspective=850,fadeOutSeconds=.34,fadeInSeconds=.25,moveSeconds=.2,moveArrowSeconds=.25,fadeOutContentSeconds=.29,fadeInContentSeconds=.1,setFromProps=function(a){return(0,_styledComponents.css)(["",""],function(b){return b[a]?"".concat((0,_lodash.default)(a),": ").concat(b[a]):null})},GridContainer=_styledComponents.default.div.withConfig({displayName:"src__GridContainer",componentId:"s178mgjs-0"})(["@media(max-width:","px){position:absolute;opacity:0;z-index:-1;}@media(min-width:","px){display:grid;",";justify-items:stretch;grid-template-columns:repeat(",",","px);grid-template-rows:","px;position:relative;",";",";",";","px;}"],function(a){var b=a.breakpoint;return b-1},function(a){var b=a.breakpoint;return b},setFromProps("justifyContent"),function(a){var b=a.columns;return b},function(a){var b=a.columnWidth;return b},function(a){var b=a.rowHeight;return b},setFromProps("background"),setFromProps("color"),setFromProps("fontFamily"),setFromProps("fontSize")),GridItem=_styledComponents.default.div.withConfig({displayName:"src__GridItem",componentId:"s178mgjs-1"})(["grid-column:"," / span 1;display:flex;justify-content:center;align-items:center;&:hover{opacity:0.5;}"],function(a){return a.index+1}),ContentRow=_styledComponents.default.div.withConfig({displayName:"src__ContentRow",componentId:"s178mgjs-2"})(["grid-column:1 / span ",";grid-row:2 / span 1;position:relative;height:0;"],function(a){var b=a.columns;return b}),ArrowUp=_styledComponents.default.div.withConfig({displayName:"src__ArrowUp",componentId:"s178mgjs-3"})(["margin-left:","px;width:0;height:0;border-left:","px solid transparent;border-right:","px solid transparent;border-bottom:","px solid ",";animation:"," ","s forwards ease;"],function(a){var b=a.toData;return b?b.width/2-arrowHeight:0},arrowHeight,arrowHeight,arrowHeight,function(a){var b=a.background;return b},function(a){var b=a.fromData,c=a.toData;return b?MoveArrow(b,c):""},moveArrowSeconds),MoveArrow=function(a,b){return(0,_styledComponents.keyframes)(["from{margin-left:","px;}to{margin-left:","px;}"],a.width/2-arrowHeight,b.width/2-arrowHeight)},Move=function(a,b){return(0,_styledComponents.keyframes)(["from{left:","px;width:","px;height:","px;}to{left:","px;width:","px;height:","px;}"],a.left,a.width,a.height,b.left,b.width,b.height)},FadeIn=(0,_styledComponents.keyframes)(["from{opacity:0;transform:perspective(","px) rotateX(-60deg);transform-origin:top center;}to{opacity:1;transform:perspective(","px) rotateX(0deg);transform-origin:top center;}"],perspective,perspective),FadeOut=(0,_styledComponents.keyframes)(["from{opacity:1;transform:perspective(","px) rotateX(0deg);transform-origin:top center;}to{opacity:0;transform:perspective(","px) rotateX(-60deg);transform-origin:top center;z-index:-1;}"],perspective,perspective),MovingDiv=_styledComponents.default.div.withConfig({displayName:"src__MovingDiv",componentId:"s178mgjs-4"})(["position:absolute;top:-10px;left:","px;width:","px;height:","px;display:",";animation:"," "," forwards ease;"],function(a){var b=a.fromData;return b?b.left:0},function(a){var b=a.fromData;return b?b.width:0},function(a){var b=a.fromData;return b?b.height:0},function(a){return a.display},function(a){var b=a.fadeOut,c=a.display,d=a.fromData,e=a.toData;if(b)return FadeOut;if("block"===c){if(d.left===e.left)return FadeIn;if(d)return Move(d,e)}return""},function(a){var b=a.fadeOut,c=a.display,d=a.fromData,e=a.toData;if(b)return"".concat(fadeOutSeconds,"s");if("block"===c){if(d.left===e.left)return"".concat(fadeInSeconds,"s");if(d)return"".concat(moveSeconds,"s")}return"0s"}),MovingDivContent=_styledComponents.default.div.withConfig({displayName:"src__MovingDivContent",componentId:"s178mgjs-5"})(["",";border-radius:4px;width:100%;height:100%;box-shadow:0px 8px 28px 1px rgba(138,126,138,0.67);"],setFromProps("background")),FadeInContent=(0,_styledComponents.keyframes)(["from{opacity:0;}to{opacity:1;}"]),FadeOutContent=(0,_styledComponents.keyframes)(["from{opacity:1;}to{opacity:0;}"]),ContentGroupContainer=_styledComponents.default.div.withConfig({displayName:"src__ContentGroupContainer",componentId:"s178mgjs-6"})(["position:absolute;top:0;margin-top:0;margin-bottom:0;width:100%;height:100%;padding:5px;opacity:",";z-index:",";animation:","  ","s forwards;"],function(a){var b=a.show;return b?1:0},function(a){var b=a.show;return b?1:0},function(a){var b=a.show,c=a.fadeOut;return b?FadeInContent:c?FadeOutContent:""},function(a){var b=a.show;return b?"".concat(fadeInContentSeconds):"".concat(fadeOutContentSeconds)}),ContentGroup=function(a){var b=a.title,c=a.width,d=a.height;return _react.default.createElement("div",null,b,": ",c,"x",d)};exports.ContentGroup=ContentGroup;var SiteNav=function(a){function b(){var a,c;_classCallCheck(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=_possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(e))),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"state",{display:"none",fadeOut:!1,fromData:null,toData:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"memoizeMenuData",(0,_memoizeOne.default)(function(a,b){return _react.default.Children.map(b,function(b,c){return _objectSpread({},b.props,{index:c,left:(c+1)*a-a/2-b.props.width/2})})})),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"memoizeGridItems",(0,_memoizeOne.default)(function(a){return _react.default.Children.map(a,function(a,b){return _react.default.createElement(GridItem,{key:"menu-title-".concat(b),index:b,onMouseEnter:function a(){return c.onMouseEnter(b)}},a.props.title)})})),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"memoizeContent",(0,_memoizeOne.default)(function(a,b,c){return _react.default.Children.map(a,function(a,d){return _react.default.createElement(ContentGroupContainer,{key:"content-group-".concat(d),show:c&&c.index===d,fadeOut:b&&b.index===d},a.props.children)})})),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"memoizeColumns",(0,_memoizeOne.default)(function(a){return _react.default.Children.count(a)})),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"memoizeAlign",(0,_memoizeOne.default)(function(a){return"left"===a?"start":"right"===a?"end":"center"})),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"close",function(){return c.setState(function(a){return{fadeOut:!0,fromData:a.toData}})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"onMouseEnter",function(a){c.setState(function(b){var d,e=c.memoizeMenuData(c.props.columnWidth,c.props.children)[a];return d=b.fadeOut||!b.toData?e:b.toData,{display:"block",fadeOut:!1,fromData:d,toData:e}})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"onMouseLeave",function(){return c.close()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"onClickMovingDiv",function(){return c.close()}),c}return _inherits(b,a),_createClass(b,[{key:"render",value:function s(){var a=this.props,b=a.columnWidth,c=a.rowHeight,d=a.background,e=a.contentBackground,f=a.children,g=a.align,h=a.fontSize,i=a.fontFamily,j=a.color,k=a.breakpoint,l=this.state,m=l.fromData,n=l.toData,o=this.memoizeColumns(f),p=this.memoizeGridItems(f),q=this.memoizeContent(f,m,n),r=this.memoizeAlign(g);return _react.default.createElement("nav",null,_react.default.createElement(GridContainer,{background:d,columnWidth:b,rowHeight:c,justifyContent:r,fontSize:h,fontFamily:i,color:j,breakpoint:k,onMouseLeave:this.onMouseLeave,columns:o},p,_react.default.createElement(ContentRow,{columns:o},_react.default.createElement(MovingDiv,{display:this.state.display,fadeOut:this.state.fadeOut,fromData:this.state.fromData,toData:this.state.toData},_react.default.createElement(ArrowUp,{fromData:this.state.fromData,toData:this.state.toData,background:e}),_react.default.createElement(MovingDivContent,{onClick:this.onClickMovingDiv,background:e},q)))))}}]),b}(_react.Component);exports.default=SiteNav,_defineProperty(SiteNav,"defaultProps",{align:"center",columnWidth:defaultColumnWidth,rowHeight:defaultRowHeight,background:defaultBackground,contentBackground:defaultContentBackground,breakpoint:defaultBreakpoint,color:defaultColor});